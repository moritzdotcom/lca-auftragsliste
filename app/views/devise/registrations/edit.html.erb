<header>
  <h1>Profil bearbeiten</h1>
</header>

<%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name), defaults: { wrapper_html: {class: 'input-field'} }) do |f| %>
  <div class="inline-inputs">
    <%= f.input :first_name, autofocus: true, autocomplete: 'given-name', label: 'Vorname' %>
    <%= f.input :last_name, autocomplete: 'family-name', label: 'Nachname' %>
  </div>
  <%= f.input :phone_number, autocomplete: 'tel', label: 'Telefonnummer' %>
  <%= f.input :mobile_phone, autocomplete: 'tel', label: 'Mobilnummer' %>
  <%= f.input :email, autocomplete: "email", label: 'Email' %>
  <div class="inline-inputs">
    <%= f.input :password, autocomplete: "new-password", label: 'Neues Passwort', hint: 'Ausfüllen um Passwort zu ändern' %>
    <%= f.input :password_confirmation, autocomplete: "new-password", label: 'Passwort bestätigen', hint: 'Ausfüllen um Passwort zu ändern' %>
  </div>
  <%= f.input :current_password, autocomplete: "current-password", label: 'Passwort', error: 'Muss angegeben werden' %>

  <%= f.submit "Speichern", class: 'btn' %>
<% end %>

<section class="devise-links">
  <%= render "devise/shared/links" %>
</section>

<script>
  function setLabels() {
    document.querySelectorAll('.input').forEach(input => {
      if ((input.querySelector('input') && input.querySelector('input').value) || (input.querySelector('select') && input.querySelector('select').options.selectedIndex != 0) || (input.querySelector('textarea') && input.querySelector('textarea').value)) {
        input.classList.add('has-value')
      }
      else {
        input.classList.remove('has-value')
      }
      input.addEventListener('change', () => {
        if ((input.querySelector('input') && input.querySelector('input').value) || (input.querySelector('select') && input.querySelector('select').options.selectedIndex != 0) || (input.querySelector('textarea') && input.querySelector('textarea').value)) {
          input.classList.add('has-value')
        }
        else {
          input.classList.remove('has-value')
        }
      })
    })
  }

  setLabels()

</script>
